---
- name: crete remote directory and copy the file
  hosts: webserver
  become: true
  vars:
    remote_dir: /etc/ansible/facts.d
    facts_file: custom.facts    
    web_pkg: apache2 
    key: ANSIBLE_VAULT;1.1;AES256
          34346138643865333634643835323033303337623436376431656139633234323232326464323066
          3639383733376339646666353965383830646566663738360a303236306139303465306163636238
          63613639613466613339346136626135383336383532336463373433666337643863613234366365
          6637323366356466350a663237306231303034623464653531616339643433306430386139633366
          34343233623630323832643732656164353037616463336139623330373864386665303631373139
          35666234646536383765373834353531326539623461663431393737663038353163323038613162
          64343832653233356235323738646231343333633235373432613532333763313865633036626637
          64393062336566643437626564353266316163373337653937663839666430396136323564646366
          38363263376533323132653862363738316565326263366561336336303233383033346233323139
          36653464633639383362306561643065613238313937393735316135336639626334643234313366
          30613562636438363265623435343131663961356138633937653330646439343430386433643532
          64386262366431333165386137393435393861623439306463323830663537303732306166376534
          32666463633937353436646532646466656338383334343837343264303564396265313933663563
          36653330376263346232666366636334323962363036633035343261336364616665356561383536
          34306439633430613637353335373938353062633663323766316337373163303939383339373639
          38626239373138363864666431623331646637653266323431353465623433663035636631643935
          30623230376232363866353766326238323266663134626136626265613530343163336362636265
          37373132326338383763633137656135386330393366353035386534386538323762613532373061
          61643331656136326162643534343439323564366639343231303136333362386664633532316135
          34653661326638656131393632356665333732343933663738643835613039623937326139613131
          64643430303236316365653062373363333930313633306334663036616538326361393539333537
          38656531653031626332616332326665343166633263366338663135633330653032356561346362
          33383365393066323265376538656335616637323337623831313631353836663734386538613163
          37623335373434666233613033613530666230353532376233353735656164373738356537353035
          32313934363937663364393432303563333565303133303635326535306234663562656161306166
          34643838366434653861623864316334666363336561313038626331306436306161666664363638
          62323635636339376266396662656337396665643237333232386339316561386236333464373564
          65643134616665666239373162356631613663376161303937383337303931323134316133346465
          36316364396564656632363431356362396139646463343038303439386233333738373463616664
          36396362383339333036663231613663346561376661376166643837613238613066303631326664
          61626134643864623366303561363030663766333234633164656436383166373137356330626663
          65656437383237363666323635366564323062646231326234643061326536353838393739313964
          65386234313133303130366639336633363433313661636263323963323661333735623635323434
          62333037623034363233353963306263613661363338356430613539323866303631333233653464
          35663437633261303133353631366562653834393131343862373332373238626465353339633232
          31623736383630613232323132366361653638343061366438316434313735613365323935633533
          38393065323563306539316131353931616637636366626130393831616131373436376564633935
          64643664663137623237336638616233343235616630323630346265643435316363343664626331
          33643061376134386364356334313463303934636439393932383362366261363839363537313463
          33343633643264663630336336303134636532626635356134353131623634356231663461373931
          35356665663336303566366362366433386332643965613830316662636634353530346164376365
          64326462376535373039396465353862326136393932633838383164346230323430343631313437
          65313564666237656339613332343538366666636161653761626264353137376233333163323063
          38663936356331633338326235376533663165393164646134323438393737623666353137373930
          65623939633063356365626133313832386232373036636631643033633033613133623934333439
          34616531313833396632663530643731613732373730306663383330656233643162613261303139
          35666564626531316363623731333864316430393737646430643366393435346365386234366430
          65623666303263376532303532646465306564326263656436393236393066323837636436333937
          3662
    password: ansible 
  tasks:
    - name: install apache
      apt:
        name: "{{ web_pkg }}"
        state: latest
        update_cache: yes
    - name: create a remote directory
      file:
        path: "{{ remote_dir  }}"
        state: directory
    - name: copy the file
      copy:
        src: "{{ facts_file  }}"
        dest: "{{ remote_dir }}" 
    - name: print the output of ansible facts
      debug:
        msg: > 
                The distribution is {{ ansible_distribution }} 
                version is {{ ansible_distribution_major_version}} and 
                ip address is {{ansible_all_ipv4_addresses}}
                os family is  {{ansible_os_family}} and ansible bios date {{ansible_bios_date}}